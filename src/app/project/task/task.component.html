<button
  type="button"
  class="text-white bg-gray-800 hover:bg-gray-900 font-medium rounded-lg text-sm px-5 py-2.5 me-2 my-2"
>
  Ajouter une tâche
</button>

<div class="mt-8">
  <div class="flex justify-around">
    <!-- Colonne TODO -->
    <div class="flex flex-col w-1/4 mx-4 border p-4 rounded-md">
      <span class="font-bold text-lg mb-4">TODO</span>
      @for (task of todoTasks; track task.id) {
      <div class="mb-4 p-4 rounded-lg text-white border cursor-pointer">
        <p class="font-bold">{{ task.name }}</p>
        <p>Priorité : {{ task.priority }}</p>
        <p>Assigné à : {{ task.assignee.username }}</p>

        <button (click)="openDeleteModal(task)" class="mt-4">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="20"
            width="17.5"
            viewBox="0 0 448 512"
          >
            <path
              fill="#ff7d78"
              d="M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"
            />
          </svg>
        </button>
      </div>
      }
    </div>

    <!-- Colonne IN PROGRESS -->
    <div class="flex flex-col w-1/4 mx-4 border p-4 rounded-md">
      <span class="font-bold text-lg mb-4">IN PROGRESS</span>
      @for (task of inProgressTasks; track task.id) {
      <div class="mb-4 p-4 rounded-lg text-white border cursor-pointer">
        <p class="font-bold">{{ task.name }}</p>
        <p>Priorité : {{ task.priority }}</p>
        <p>Assigné à : {{ task.assignee.username }}</p>

        <button (click)="openDeleteModal(task)" class="mt-4">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="20"
            width="17.5"
            viewBox="0 0 448 512"
          >
            <path
              fill="#ff7d78"
              d="M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"
            />
          </svg>
        </button>
      </div>
      }
    </div>

    <!-- Colonne DONE -->
    <div class="flex flex-col w-1/4 mx-4 border p-4 rounded-md">
      <span class="font-bold text-lg mb-4">DONE</span>
      @for (task of doneTasks; track task.id) {
      <div class="mb-4 p-4 rounded-lg text-white border cursor-pointer">
        <p class="font-bold">{{ task.name }}</p>
        <p>Priorité : {{ task.priority }}</p>
        <p>Assigné à : {{ task.assignee.username }}</p>

        <button (click)="openDeleteModal(task)" class="mt-4">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="20"
            width="17.5"
            viewBox="0 0 448 512"
          >
            <path
              fill="#ff7d78"
              d="M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"
            />
          </svg>
        </button>
      </div>
      }
    </div>

    <!-- Colonne CLOSED -->
    <div class="flex flex-col w-1/4 mx-4 border p-4 rounded-md">
      <span class="font-bold text-lg mb-4">CLOSED</span>
      @for (task of closedTasks; track task.id) {
      <div class="mb-4 p-4 rounded-lg text-white border cursor-pointer">
        <p class="font-bold">{{ task.name }}</p>
        <p>Priorité : {{ task.priority }}</p>
        <p>Assigné à : {{ task.assignee.username }}</p>

        <button (click)="openDeleteModal(task)" class="mt-4">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="20"
            width="17.5"
            viewBox="0 0 448 512"
          >
            <path
              fill="#ff7d78"
              d="M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"
            />
          </svg>
        </button>
      </div>
      }
    </div>
  </div>
</div>

<!-- Modal de confirmation -->
<div
  id="popup-modal"
  tabindex="-1"
  class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full bg-black bg-opacity-50"
>
  <div class="relative p-4 w-full max-w-md max-h-full top-1/2 left-[40%]">
    <div class="relative rounded-lg shadow-sm  bg-gray-700">
      <button
        (click)="closeDeleteModal()"
        type="button"
        class="absolute top-3 end-2.5 text-gray-400 bg-transparent rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center  hover:bg-gray-600  hover:text-white"
      >
        <svg
          class="w-3 h-3"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 14 14"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"
          />
        </svg>
        <span class="sr-only">Close modal</span>
      </button>
      <div class="p-4 md:p-5 text-center">
        <svg
          class="mx-auto mb-4 w-12 h-12  text-gray-200"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 20 20"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"
          />
        </svg>
        <h3 class="mb-5 text-lg font-normal   text-gray-400">
          Êtes-vous sûr de vouloir supprimer cette tâche ?
        </h3>
        <button
          (click)="deleteTask()"
          type="button"
          class="text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none   focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center"
        >
          Confirmer
        </button>
        <button
          (click)="closeDeleteModal()"
          type="button"
          class="py-2.5 px-5 ms-3 text-sm font-medium  focus:outline-none  rounded-lg border focus:z-10 focus:ring-4  focus:ring-gray-700  bg-gray-800  text-gray-400  border-gray-600  hover:text-white  hover:bg-gray-700"
        >
          Annuler
        </button>
      </div>
    </div>
  </div>
</div>
